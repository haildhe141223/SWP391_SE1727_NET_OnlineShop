@using SWP391.OnlineShop.ServiceModel.ViewModels.Carts
@model List<OrderViewModels>

@{
	var successMess = TempData["SuccessMess"] as string;
	var errorMess = TempData["ErrorMess"] as string;
}

<div class="container-fluid">
	<!-- Page Heading -->
	<h1 class="h3 mb-2 text-gray-800">Order Containers</h1>
	<p class="mb-4">
	</p>
	@if (!string.IsNullOrWhiteSpace(errorMess))
	{
		<div class="alert alert-danger my-2 text-center">
			@errorMess
		</div>
	}
	@if (!string.IsNullOrWhiteSpace(successMess))
	{
		<div class="alert alert-success my-2 text-center">
			@successMess
		</div>
	}
	@*<div>
		<a class="btn btn-outline-primary my-3" asp-action="Add">Add New Voucher</a>
	</div>
*@
	<!-- DataTales Example -->
	<div class="card shadow mb-4">
		<div class="card-header py-3">
			<h6 class="m-0 font-weight-bold text-primary">Order DataTables</h6>
		</div>
		<div class="card-body">
			<div class="table-responsive">
				<table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
					<thead>
						<tr>
							<th>OrderId</th>
							<th>CustomerName</th>
							<th>CustomerAddress</th>
							<th>CustomerPhoneNumber</th>
							<th>CustomerEmail</th>
							<th>TotalCost</th>
							<th>OrderStatus</th>
							<th>OrderDetails</th>
							<th>Action</th>
						</tr>
					</thead>
					<tfoot>
						<tr>
							<th>OrderId</th>
							<th>CustomerName</th>
							<th>CustomerAddress</th>
							<th>CustomerPhoneNumber</th>
							<th>CustomerEmail</th>
							<th>TotalCost</th>
							<th>OrderStatus</th>
							<th>OrderDetails</th>
							<th>Action</th>
						</tr>
					</tfoot>
					<tbody>
						@if (Model != null && Model.Count > 0)
						{
							@foreach (var order in Model)
							{
								<tr>
									<td>
										@order.Id
									</td>
									<td>@order.CustomerName</td>
									<td>@order.CustomerAddress</td>
									<td>@order.CustomerPhoneNumber</td>
									<td>@order.CustomerEmail</td>
									<td>@order.TotalCost</td>
									<td>@order.OrderStatus</td>
									<td>
										@foreach (var item in order.OrderDetails)
										{
											@(item.Product.ProductName)  <br/>
										}
									</td>
									<td>
										<a class="mx-1 btn btn-outline-info" asp-route-id="@order.Id"
								   asp-action="Details">View Order Detail</a>
									</td>
								</tr>
							}
						}
						else
						{
							<tr>
								<td colspan="8">
									No Data
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	function confirmDelete() {
		return confirm("Are you sure you want to delete this record?");
	}
</script>